"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.deleteProject = exports.deleteAllFeaturesThatBelongToProject = exports.deleteAllPermissionsForProject = exports.getUserPermissionsForProject = exports.newFeature = exports.getFeatureStateById = exports.deleteFeatureById = exports.toggleFeature = exports.selectAllFeaturesFromProject = exports.selectAllFeaturesForUser = exports.newUserProjectPermissions = exports.newProjectForUser = exports.selectAllProjectsForUser = exports.selectProjectForUser = exports.selectProject = void 0;
exports.selectProject = `
	SELECT * FROM projects
	WHERE project_id = $1;
`;
exports.selectProjectForUser = `
	SELECT 
		project_id,
		p.project_name,
		p.date_created,
		p.active 
	FROM user_project_permissions upp
	INNER JOIN projects p USING(project_id)
	WHERE email=$1 AND project_id = $2;
`;
exports.selectAllProjectsForUser = `
	SELECT 
		project_id,
		p.project_name,
		p.date_created,
		p.active 
	FROM user_project_permissions upp
	INNER JOIN projects p USING(project_id)
	WHERE email=$1
	ORDER BY p.date_created ASC;
`;
exports.newProjectForUser = `
	INSERT INTO projects (project_id, project_name, active, organization_id)
	VALUES ($1, $2, $3, $4);
`;
exports.newUserProjectPermissions = `
	INSERT INTO user_project_permissions (project_id, email, is_admin)
	VALUES ($1, $2, $3);
`;
exports.selectAllFeaturesForUser = `
	SELECT
		upp.project_id,
		p.project_name,
		f.id as feature_id,
		f."name" as feature_name,
		f.value as feature_value,
		f.enabled as feature_enabled,
		f.description as feature_description,
		f.date_created 
	FROM user_project_permissions upp
	INNER JOIN features f USING(project_id)
	INNER JOIN projects p USING(project_id)
	WHERE email=$1
	ORDER BY f.date_created ASC;
`;
exports.selectAllFeaturesFromProject = `
	SELECT
		upp.project_id,
		p.project_name,
		f.id as feature_id,
		f."name" as feature_name,
		f.value as feature_value,
		f.enabled as feature_enabled,
		f.description as feature_description,
		f.date_created 
	FROM user_project_permissions upp
	INNER JOIN features f USING(project_id)
	INNER JOIN projects p USING(project_id)
	WHERE email=$1 AND project_id = $2
	ORDER BY f.date_created ASC;
`;
exports.toggleFeature = `
	UPDATE features
	SET enabled = $1
	WHERE 
		project_id = $2 AND name = $3
	RETURNING 
		id as feature_id,
		project_id,
		name as feature_name,
		value as feature_value,
		enabled as feature_enabled,
		description as feature_description,
		date_created;
`;
exports.deleteFeatureById = `
	DELETE 
	FROM features
	WHERE project_id = $1 and name = $2;
`;
exports.getFeatureStateById = `
	SELECT 
		id as feature_id,
		project_id,
		name as feature_name,
		value as feature_value,
		enabled as feature_enabled,
		description as feature_description,
		date_created
	FROM features
	WHERE project_id = $1 AND name = $2;
`;
exports.newFeature = `
	INSERT INTO features (project_id, name, value, enabled, description)
	VALUES ($1, $2, $3, $4, $5)
	RETURNING
		id as feature_id,
		project_id,
		name as feature_name,
		value as feature_value,
		enabled as feature_enabled,
		description as feature_description,
		date_created
	;
`;
exports.getUserPermissionsForProject = `
	SELECT is_admin from user_project_permissions
	WHERE project_id = $1
	AND email = $2
`;
exports.deleteAllPermissionsForProject = `
	DELETE FROM user_project_permissions
	WHERE project_id = $1;
`;
exports.deleteAllFeaturesThatBelongToProject = `
	DELETE FROM features
	WHERE project_id = $1;
`;
exports.deleteProject = `
	DELETE FROM projects
	WHERE project_id = $1;
`;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvaW9yb3MvRG9jdW1lbnRzL3BsYXlncm91bmQvZG9ja2VyLXNlcnZpY2VzL2ZlYXR1cmUtdG9nZ2xlci9mZWF0dXJlLXRvZ2dsZXItYmFja2VuZC9zcmMvZGIvcXVlcmllcy50cyIsInNvdXJjZXMiOlsiQzovVXNlcnMvaW9yb3MvRG9jdW1lbnRzL3BsYXlncm91bmQvZG9ja2VyLXNlcnZpY2VzL2ZlYXR1cmUtdG9nZ2xlci9mZWF0dXJlLXRvZ2dsZXItYmFja2VuZC9zcmMvZGIvcXVlcmllcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBYSxRQUFBLGFBQWEsR0FBRzs7O0NBRzVCLENBQUM7QUFFVyxRQUFBLG9CQUFvQixHQUFHOzs7Ozs7Ozs7Q0FTbkMsQ0FBQztBQUVXLFFBQUEsd0JBQXdCLEdBQUc7Ozs7Ozs7Ozs7Q0FVdkMsQ0FBQztBQUVXLFFBQUEsaUJBQWlCLEdBQUc7OztDQUdoQyxDQUFDO0FBRVcsUUFBQSx5QkFBeUIsR0FBRzs7O0NBR3hDLENBQUM7QUFFVyxRQUFBLHdCQUF3QixHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Q0FldkMsQ0FBQztBQUVXLFFBQUEsNEJBQTRCLEdBQUc7Ozs7Ozs7Ozs7Ozs7OztDQWUzQyxDQUFDO0FBRVcsUUFBQSxhQUFhLEdBQUc7Ozs7Ozs7Ozs7Ozs7Q0FhNUIsQ0FBQztBQUVXLFFBQUEsaUJBQWlCLEdBQUc7Ozs7Q0FJaEMsQ0FBQztBQUVXLFFBQUEsbUJBQW1CLEdBQUc7Ozs7Ozs7Ozs7O0NBV2xDLENBQUM7QUFHVyxRQUFBLFVBQVUsR0FBRzs7Ozs7Ozs7Ozs7O0NBWXpCLENBQUM7QUFFVyxRQUFBLDRCQUE0QixHQUFHOzs7O0NBSTNDLENBQUM7QUFFVyxRQUFBLDhCQUE4QixHQUFHOzs7Q0FHN0MsQ0FBQztBQUVXLFFBQUEsb0NBQW9DLEdBQUc7OztDQUduRCxDQUFDO0FBRVcsUUFBQSxhQUFhLEdBQUc7OztDQUc1QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNlbGVjdFByb2plY3QgPSBgXG5cdFNFTEVDVCAqIEZST00gcHJvamVjdHNcblx0V0hFUkUgcHJvamVjdF9pZCA9ICQxO1xuYDtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFByb2plY3RGb3JVc2VyID0gYFxuXHRTRUxFQ1QgXG5cdFx0cHJvamVjdF9pZCxcblx0XHRwLnByb2plY3RfbmFtZSxcblx0XHRwLmRhdGVfY3JlYXRlZCxcblx0XHRwLmFjdGl2ZSBcblx0RlJPTSB1c2VyX3Byb2plY3RfcGVybWlzc2lvbnMgdXBwXG5cdElOTkVSIEpPSU4gcHJvamVjdHMgcCBVU0lORyhwcm9qZWN0X2lkKVxuXHRXSEVSRSBlbWFpbD0kMSBBTkQgcHJvamVjdF9pZCA9ICQyO1xuYDtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEFsbFByb2plY3RzRm9yVXNlciA9IGBcblx0U0VMRUNUIFxuXHRcdHByb2plY3RfaWQsXG5cdFx0cC5wcm9qZWN0X25hbWUsXG5cdFx0cC5kYXRlX2NyZWF0ZWQsXG5cdFx0cC5hY3RpdmUgXG5cdEZST00gdXNlcl9wcm9qZWN0X3Blcm1pc3Npb25zIHVwcFxuXHRJTk5FUiBKT0lOIHByb2plY3RzIHAgVVNJTkcocHJvamVjdF9pZClcblx0V0hFUkUgZW1haWw9JDFcblx0T1JERVIgQlkgcC5kYXRlX2NyZWF0ZWQgQVNDO1xuYDtcblxuZXhwb3J0IGNvbnN0IG5ld1Byb2plY3RGb3JVc2VyID0gYFxuXHRJTlNFUlQgSU5UTyBwcm9qZWN0cyAocHJvamVjdF9pZCwgcHJvamVjdF9uYW1lLCBhY3RpdmUsIG9yZ2FuaXphdGlvbl9pZClcblx0VkFMVUVTICgkMSwgJDIsICQzLCAkNCk7XG5gO1xuXG5leHBvcnQgY29uc3QgbmV3VXNlclByb2plY3RQZXJtaXNzaW9ucyA9IGBcblx0SU5TRVJUIElOVE8gdXNlcl9wcm9qZWN0X3Blcm1pc3Npb25zIChwcm9qZWN0X2lkLCBlbWFpbCwgaXNfYWRtaW4pXG5cdFZBTFVFUyAoJDEsICQyLCAkMyk7XG5gO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0QWxsRmVhdHVyZXNGb3JVc2VyID0gYFxuXHRTRUxFQ1Rcblx0XHR1cHAucHJvamVjdF9pZCxcblx0XHRwLnByb2plY3RfbmFtZSxcblx0XHRmLmlkIGFzIGZlYXR1cmVfaWQsXG5cdFx0Zi5cIm5hbWVcIiBhcyBmZWF0dXJlX25hbWUsXG5cdFx0Zi52YWx1ZSBhcyBmZWF0dXJlX3ZhbHVlLFxuXHRcdGYuZW5hYmxlZCBhcyBmZWF0dXJlX2VuYWJsZWQsXG5cdFx0Zi5kZXNjcmlwdGlvbiBhcyBmZWF0dXJlX2Rlc2NyaXB0aW9uLFxuXHRcdGYuZGF0ZV9jcmVhdGVkIFxuXHRGUk9NIHVzZXJfcHJvamVjdF9wZXJtaXNzaW9ucyB1cHBcblx0SU5ORVIgSk9JTiBmZWF0dXJlcyBmIFVTSU5HKHByb2plY3RfaWQpXG5cdElOTkVSIEpPSU4gcHJvamVjdHMgcCBVU0lORyhwcm9qZWN0X2lkKVxuXHRXSEVSRSBlbWFpbD0kMVxuXHRPUkRFUiBCWSBmLmRhdGVfY3JlYXRlZCBBU0M7XG5gO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0QWxsRmVhdHVyZXNGcm9tUHJvamVjdCA9IGBcblx0U0VMRUNUXG5cdFx0dXBwLnByb2plY3RfaWQsXG5cdFx0cC5wcm9qZWN0X25hbWUsXG5cdFx0Zi5pZCBhcyBmZWF0dXJlX2lkLFxuXHRcdGYuXCJuYW1lXCIgYXMgZmVhdHVyZV9uYW1lLFxuXHRcdGYudmFsdWUgYXMgZmVhdHVyZV92YWx1ZSxcblx0XHRmLmVuYWJsZWQgYXMgZmVhdHVyZV9lbmFibGVkLFxuXHRcdGYuZGVzY3JpcHRpb24gYXMgZmVhdHVyZV9kZXNjcmlwdGlvbixcblx0XHRmLmRhdGVfY3JlYXRlZCBcblx0RlJPTSB1c2VyX3Byb2plY3RfcGVybWlzc2lvbnMgdXBwXG5cdElOTkVSIEpPSU4gZmVhdHVyZXMgZiBVU0lORyhwcm9qZWN0X2lkKVxuXHRJTk5FUiBKT0lOIHByb2plY3RzIHAgVVNJTkcocHJvamVjdF9pZClcblx0V0hFUkUgZW1haWw9JDEgQU5EIHByb2plY3RfaWQgPSAkMlxuXHRPUkRFUiBCWSBmLmRhdGVfY3JlYXRlZCBBU0M7XG5gO1xuXG5leHBvcnQgY29uc3QgdG9nZ2xlRmVhdHVyZSA9IGBcblx0VVBEQVRFIGZlYXR1cmVzXG5cdFNFVCBlbmFibGVkID0gJDFcblx0V0hFUkUgXG5cdFx0cHJvamVjdF9pZCA9ICQyIEFORCBuYW1lID0gJDNcblx0UkVUVVJOSU5HIFxuXHRcdGlkIGFzIGZlYXR1cmVfaWQsXG5cdFx0cHJvamVjdF9pZCxcblx0XHRuYW1lIGFzIGZlYXR1cmVfbmFtZSxcblx0XHR2YWx1ZSBhcyBmZWF0dXJlX3ZhbHVlLFxuXHRcdGVuYWJsZWQgYXMgZmVhdHVyZV9lbmFibGVkLFxuXHRcdGRlc2NyaXB0aW9uIGFzIGZlYXR1cmVfZGVzY3JpcHRpb24sXG5cdFx0ZGF0ZV9jcmVhdGVkO1xuYDtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUZlYXR1cmVCeUlkID0gYFxuXHRERUxFVEUgXG5cdEZST00gZmVhdHVyZXNcblx0V0hFUkUgcHJvamVjdF9pZCA9ICQxIGFuZCBuYW1lID0gJDI7XG5gO1xuXG5leHBvcnQgY29uc3QgZ2V0RmVhdHVyZVN0YXRlQnlJZCA9IGBcblx0U0VMRUNUIFxuXHRcdGlkIGFzIGZlYXR1cmVfaWQsXG5cdFx0cHJvamVjdF9pZCxcblx0XHRuYW1lIGFzIGZlYXR1cmVfbmFtZSxcblx0XHR2YWx1ZSBhcyBmZWF0dXJlX3ZhbHVlLFxuXHRcdGVuYWJsZWQgYXMgZmVhdHVyZV9lbmFibGVkLFxuXHRcdGRlc2NyaXB0aW9uIGFzIGZlYXR1cmVfZGVzY3JpcHRpb24sXG5cdFx0ZGF0ZV9jcmVhdGVkXG5cdEZST00gZmVhdHVyZXNcblx0V0hFUkUgcHJvamVjdF9pZCA9ICQxIEFORCBuYW1lID0gJDI7XG5gO1xuXG5cbmV4cG9ydCBjb25zdCBuZXdGZWF0dXJlID0gYFxuXHRJTlNFUlQgSU5UTyBmZWF0dXJlcyAocHJvamVjdF9pZCwgbmFtZSwgdmFsdWUsIGVuYWJsZWQsIGRlc2NyaXB0aW9uKVxuXHRWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSlcblx0UkVUVVJOSU5HXG5cdFx0aWQgYXMgZmVhdHVyZV9pZCxcblx0XHRwcm9qZWN0X2lkLFxuXHRcdG5hbWUgYXMgZmVhdHVyZV9uYW1lLFxuXHRcdHZhbHVlIGFzIGZlYXR1cmVfdmFsdWUsXG5cdFx0ZW5hYmxlZCBhcyBmZWF0dXJlX2VuYWJsZWQsXG5cdFx0ZGVzY3JpcHRpb24gYXMgZmVhdHVyZV9kZXNjcmlwdGlvbixcblx0XHRkYXRlX2NyZWF0ZWRcblx0O1xuYDtcblxuZXhwb3J0IGNvbnN0IGdldFVzZXJQZXJtaXNzaW9uc0ZvclByb2plY3QgPSBgXG5cdFNFTEVDVCBpc19hZG1pbiBmcm9tIHVzZXJfcHJvamVjdF9wZXJtaXNzaW9uc1xuXHRXSEVSRSBwcm9qZWN0X2lkID0gJDFcblx0QU5EIGVtYWlsID0gJDJcbmA7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVBbGxQZXJtaXNzaW9uc0ZvclByb2plY3QgPSBgXG5cdERFTEVURSBGUk9NIHVzZXJfcHJvamVjdF9wZXJtaXNzaW9uc1xuXHRXSEVSRSBwcm9qZWN0X2lkID0gJDE7XG5gO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQWxsRmVhdHVyZXNUaGF0QmVsb25nVG9Qcm9qZWN0ID0gYFxuXHRERUxFVEUgRlJPTSBmZWF0dXJlc1xuXHRXSEVSRSBwcm9qZWN0X2lkID0gJDE7XG5gO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlUHJvamVjdCA9IGBcblx0REVMRVRFIEZST00gcHJvamVjdHNcblx0V0hFUkUgcHJvamVjdF9pZCA9ICQxO1xuYDtcblxuIl19